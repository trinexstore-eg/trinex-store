<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>TRINEX | Admin</title>
    <style>
        body { background: #0d0d0d; color: #fff; font-family: sans-serif; padding: 30px; }
        .card { background: #1a1a1a; padding: 20px; border: 1px solid #333; margin-bottom: 20px; }
        input, select { padding: 10px; background: #000; border: 1px solid #333; color: #fff; margin: 5px; }
        button { padding: 10px 20px; background: #00e676; border: none; cursor: pointer; font-weight: bold; }
    </style>
</head>
<body>
    <h1>لوحة تحكم TRINEX</h1>
    <div class="card">
        <h3>إضافة منتج جديد</h3>
        <input type="text" id="pName" placeholder="اسم المنتج">
        <input type="number" id="pPrice" placeholder="السعر">
        <input type="text" id="pImg" placeholder="اسم الصورة (hode1.jpg)">
        <select id="pCat"><option value="winter">شتوي</option><option value="summer">صيفي</option></select>
        <button onclick="addProduct()">نشر المنتج</button>
    </div>

    <div class="card">
        <h3>المنتجات الحالية</h3>
        <div id="list">جاري التحميل...</div>
    </div>

    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'
        const supabase = createClient('https://izxylyjpiksklpopprme.supabase.co', 'sb_publishable_9t9BN0jRvkVa_iG6IBxXuQ_kaMmLl8F');

        window.addProduct = async () => {
            const item = {
                name: document.getElementById('pName').value,
                price: document.getElementById('pPrice').value,
                img: document.getElementById('pImg').value,
                category: document.getElementById('pCat').value
            };
            const { error } = await supabase.from('products').insert([item]);
            if (error) alert(error.message); else location.reload();
        }

        async function load() {
            const { data } = await supabase.from('products').select('*');
            document.getElementById('list').innerHTML = data.map(p => `<div>${p.name} - ${p.price} EGP <button onclick="del(${p.id})" style="background:red; padding:2px 5px;">X</button></div>`).join('');
        }
        window.del = async (id) => { await supabase.from('products').delete().eq('id', id); location.reload(); }
        load();
    </script>
</body>
</html>