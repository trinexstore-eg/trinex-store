<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRINEX | Login Access</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --bg: #000; --green: #00e676; --panel: #111; --text: #fff; --error: #ff3333; }
        body { margin: 0; padding: 0; font-family: 'Montserrat', sans-serif; background: url('hode1.jpg') no-repeat center center/cover; height: 100vh; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.85); backdrop-filter: blur(3px); }
        .login-container { position: relative; z-index: 2; background: var(--panel); width: 400px; max-width: 90%; padding: 40px; border-radius: 10px; border: 1px solid #333; box-shadow: 0 0 50px rgba(0,0,0,0.8); text-align: center; }
        .brand-logo { font-size: 2rem; font-weight: 900; color: #fff; letter-spacing: 3px; margin-bottom: 5px; display: block; text-decoration: none; }
        .sub-text { color: #666; font-size: 0.8rem; margin-bottom: 30px; display: block; }
        .toggle-box { display: flex; background: #000; padding: 5px; border-radius: 30px; margin-bottom: 30px; border: 1px solid #222; position: relative; }
        .toggle-btn { flex: 1; padding: 10px; border: none; background: none; color: #666; font-weight: bold; cursor: pointer; border-radius: 25px; transition: 0.3s; z-index: 2; }
        .toggle-btn.active { color: #000; }
        .slide-bg { position: absolute; top: 5px; left: 5px; width: 50%; height: calc(100% - 10px); background: var(--green); border-radius: 25px; transition: 0.3s; z-index: 1; }
        .form-box { display: none; } .form-box.active { display: block; }
        .input-group { position: relative; margin-bottom: 15px; text-align: left; }
        .input-group i { position: absolute; top: 15px; left: 15px; color: #666; }
        .input-group input { width: 100%; padding: 15px 15px 15px 45px; background: #000; border: 1px solid #333; color: #fff; border-radius: 5px; box-sizing: border-box; }
        .main-btn { width: 100%; padding: 15px; background: var(--green); color: #000; font-weight: 900; border: none; border-radius: 5px; cursor: pointer; text-transform: uppercase; }
    </style>
</head>
<body>
    <div class="overlay"></div>
    <div class="login-container">
        <a href="index.html" class="brand-logo">TRINEX</a>
        <span class="sub-text">JOIN THE MOVEMENT</span>
        <div class="toggle-box"><div class="slide-bg" id="slideBg"></div><button class="toggle-btn active" onclick="switchForm('login')">LOGIN</button><button class="toggle-btn" onclick="switchForm('register')">REGISTER</button></div>
        <div id="loginForm" class="form-box active">
            <div class="input-group"><i class="fas fa-phone"></i><input type="number" id="logPhone" placeholder="Phone Number"></div>
            <div class="input-group"><i class="fas fa-lock"></i><input type="password" id="logPass" placeholder="Password"></div>
            <button class="main-btn" onclick="handleLogin()">ACCESS ACCOUNT</button>
        </div>
        <div id="registerForm" class="form-box">
            <div class="input-group"><i class="fas fa-user"></i><input type="text" id="regName" placeholder="Full Name"></div>
            <div class="input-group"><i class="fas fa-phone"></i><input type="number" id="regPhone" placeholder="Phone Number"></div>
            <div class="input-group"><i class="fas fa-map-marker-alt"></i><input type="text" id="regAddress" placeholder="Address"></div>
            <div class="input-group"><i class="fas fa-lock"></i><input type="password" id="regPass" placeholder="Password"></div>
            <button class="main-btn" onclick="handleRegister()">CREATE ACCOUNT</button>
        </div>
    </div>
    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'
        const supabaseUrl = 'https://izxylyjpiksklpopprme.supabase.co';
        const supabaseKey = 'sb_publishable_9t9BN0jRvkVa_iG6IBxXuQ_kaMmLl8F';
        const supabase = createClient(supabaseUrl, supabaseKey);

        window.handleLogin = async function() {
            let phone = document.getElementById('logPhone').value;
            let pass = document.getElementById('logPass').value;
            let email = phone + "@trinex.com";
            const { error } = await supabase.auth.signInWithPassword({ email, password: pass });
            if (error) alert(error.message); else window.location.href = "index.html";
        }
        window.handleRegister = async function() {
            let name = document.getElementById('regName').value;
            let phone = document.getElementById('regPhone').value;
            let address = document.getElementById('regAddress').value;
            let pass = document.getElementById('regPass').value;
            let email = phone + "@trinex.com";
            const { data, error } = await supabase.auth.signUp({ email, password: pass });
            if (error) return alert(error.message);
            await supabase.from('profiles').insert([{ id: data.user.id, full_name: name, phone: phone, address: address }]);
            alert("Account Created!"); window.location.href = "index.html";
        }
        window.switchForm = (type) => {
            let bg = document.getElementById('slideBg');
            if(type==='register'){ bg.style.left='50%'; document.getElementById('loginForm').classList.remove('active'); document.getElementById('registerForm').classList.add('active'); }
            else { bg.style.left='5px'; document.getElementById('registerForm').classList.remove('active'); document.getElementById('loginForm').classList.add('active'); }
        }
    </script>
</body>
</html>